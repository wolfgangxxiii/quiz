<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Quiz Dyplomowy ‚Äì Informatyka</title>
  <style>
    html, body { height: 100%; margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #f0f6ff 0%, #e5f1ff 55%, #dbf5ff 100%);
      font-family: 'Segoe UI', Arial, sans-serif;
      color: #18304b;
      letter-spacing: 0.01em;
      font-size: 18px;
      margin: 0;
      padding: 0;
      transition: background .3s;
    }
    @media (prefers-color-scheme: dark) {
      body {
        background: linear-gradient(135deg, #172230 0%, #20324e 100%);
        color: #f8fafb;
      }
    }
    .menu, .quiz-container, .flashcard-container, .range-container {
      background: rgba(255,255,255,0.97);
      padding: 2.2em 1.2em 1.4em 1.2em;
      border-radius: 20px;
      max-width: 410px;
      margin: 2.1em auto 1.3em auto;
      box-shadow: 0 4px 32px 2px rgba(64,96,180,0.08), 0 0px 0px #fff;
      width: 96vw;
      min-height: 370px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      position: relative;
      animation: fadein .5s;
    }
    @media (max-width: 600px) {
      .menu, .quiz-container, .flashcard-container, .range-container {
        margin: 1.1em auto 1.1em auto;
        padding: 1.1em 2vw 1.2em 2vw;
        max-width: 99vw;
        border-radius: 1.1em;
      }
    }
    @keyframes fadein { from { opacity: 0; transform: translateY(40px);} to { opacity:1; transform: translateY(0);} }

    .title {
      text-align: center;
      font-size: 1.22em;
      font-weight: 700;
      margin-bottom: .7em;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: .6em;
      color: #0d47a1;
    }
    .title svg { height: 1.3em; width: 1.3em; opacity: .93; vertical-align: middle;}
    @media (prefers-color-scheme: dark) {
      .title { color: #90caf9;}
      .menu, .quiz-container, .flashcard-container, .range-container { background: #233354e6;}
    }
    .progress { text-align: center; margin-bottom: .8em; font-size: 1.02em; color: #2196f3; font-weight: bold; }
    .question { font-size: 1.08em; margin-bottom: 1.05em; min-height: 44px; text-align: center; font-weight: 500; }

    .menu button, .range-container button, .answers button, .next-btn, .restart-btn, .back-btn, .show-explanation-btn, .flashcard-nav button {
      margin: .42em 0;
      padding: 1.08em 1em;
      font-size: 1.07em;
      border: none;
      border-radius: 13px;
      background: linear-gradient(90deg, #2196f3 65%, #5ec3fe 100%);
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      width: 100%;
      box-shadow: 0 2px 8px rgba(33,150,243,0.08);
      transition: background .13s, transform .07s, box-shadow .15s;
      will-change: transform;
      outline: none;
      position: relative;
      user-select: none;
      -webkit-tap-highlight-color: rgba(33,150,243,0.2);
      display: block;
    }
    .answers button {
      background: linear-gradient(90deg,#e3ebf7 65%,#d5f7e6 100%);
      color: #164e33;
      font-weight: 500;
      border: 1.5px solid #d3e4f7;
      box-shadow: 0 2px 8px rgba(38,198,218,0.02);
      margin: 0.45em 0;
      font-size: 1.01em;
    }
    .answers button:active, .menu button:active, .range-container button:active, .next-btn:active, .restart-btn:active, .back-btn:active, .show-explanation-btn:active {
      background: linear-gradient(90deg, #1565c0 70%, #27b7f5 100%);
      color: #e3f7ff;
      transform: scale(0.97);
      box-shadow: 0 1px 1px #1565c055;
    }
    .answers button.correct {
      background: linear-gradient(92deg, #6fe783 80%, #eafef4 100%);
      color: #184d1c; border: 1.7px solid #21b04c;
      font-weight: bold;
      box-shadow: 0 4px 24px #77fdaf44;
    }
    .answers button.wrong {
      background: linear-gradient(92deg, #ffb4b4 80%, #fff2f2 100%);
      color: #810e0e; border: 1.6px solid #c60000;
      box-shadow: 0 4px 14px #ffb4b455;
    }
    .next-btn, .restart-btn, .back-btn, .show-explanation-btn, .flashcard-nav button {
      margin-top: 1.2em;
      margin-bottom: 0;
      background: linear-gradient(90deg, #2196f3 70%, #7fdcff 100%);
      font-weight: 700;
      color: #fff;
      border: none;
      box-shadow: 0 2px 10px rgba(33,150,243,0.08);
    }
    .flashcard-nav { display: flex; gap: 1em; margin-top: 1.2em; }
    .flashcard-nav button { flex: 1 1 0; margin: 0; background: linear-gradient(90deg,#24c6bc 60%, #43e97b 100%);}
    .flashcard-nav button[disabled] { opacity: 0.36; background: #c8d1d9; color: #888;}
    .back-btn { background: linear-gradient(90deg, #ef5350 50%, #ffc371 100%); color: #fff; margin-top: 1.1em;}
    @media (max-width:600px) {
      .next-btn { position: sticky; bottom: 1em; z-index: 9;}
    }
    #results { margin-top: 1.4em; padding: 1.1em 1em; background-color: #e3f2fd;
      border: 1.3px solid #90caf9; border-radius: 11px; text-align: center; font-size: 1.17em; color: #134980;}
    @media (prefers-color-scheme: dark) {
      #results { background: #222f4e; border-color:#314e7e; color:#b3eaff;}
      .answers button, .flashcard-answer { color: #e8fff6;}
      .answers button { background: linear-gradient(90deg,#3a4565 65%,#335c45 100%); border-color: #5ae5b2;}
      .answers button.correct { background: linear-gradient(92deg, #4fd773 80%, #234c34 100%); color: #e2ffe3; }
      .answers button.wrong { background: linear-gradient(92deg, #ff9a9a 80%, #5e2438 100%); color: #ffd6d6; }
    }
    .flashcard-question { font-size: 1.09em; min-height: 55px; margin-bottom: 1.2em; text-align: center; }
    .flashcard-answer { margin: .5em 0 1.2em 0; padding: 1.08em; background: #f1ffe8;
      border: 1.5px solid #b2dfdb; border-radius: 11px; color: #317431;
      font-size: 1.02em; text-align: center; box-shadow: 0 2px 9px #b1fdb155;}
    @media (prefers-color-scheme: dark) {
      .flashcard-answer { background: #234c34; color: #bef7b6; border-color: #55cf7e;}
    }

    /* POPRAWKA: zakresy w kolumnie, nie w linii! */
    .category-list {
      display: flex;
      flex-direction: column;
      gap: .64em;
    }
    .category-list label {
      font-size: 1em;
      padding: 0.29em 0;
      display: block;
    }
    .category-list input[type=\"radio\"] { margin-right: 9px; accent-color: #2196f3;}
    .category-list { /* gap ju≈º dodany wy≈ºej */ }

  </style>
</head>
<body>
  <div id="menu" class="menu">
  <div class="title">
    <svg fill="none" viewBox="0 0 32 32"><rect width="32" height="32" rx="8" fill="#2196f3"/><path d="M10 10h12v2H10zm0 5h12v2H10zm0 5h8v2h-8z" fill="#fff"/></svg>
    Quiz Dyplomowy
  </div>
  <!-- FISZKI NA G√ìRZE -->
  <button onclick="startFlashcardsMode()">üÉè Fiszki</button>
  <button onclick="showRangeSelectionFlashcards()">üÉè Fiszki ‚Äì wybierz zakres pyta≈Ñ</button>
  <!-- RESZTA MENU -->
  <button onclick="startExamMode()">üéØ Tryb egzamin (20 losowych pyta≈Ñ)</button>
  <button onclick="startLearningMode()">üí° Tryb nauki z wyja≈õnieniem</button>
  <button onclick="showRangeSelection()">üìö Wybierz zakres pyta≈Ñ</button>
  <!-- KAFEL TW√ìRCY NA DOLE -->
  <div style="margin-top:2em; background:#e3f2fd; border-radius:12px; padding:1.1em; font-size:0.98em; color:#134980; box-shadow:0 2px 8px #b0d0fd44;">
    <b>Autor:</b> Szymon Piotr B≈ÅAWAT<br>
    <b>Email:</b> gdx161056@student.gdansk.merito.pl<br>
    <b>Email:</b> szymon.bawat@gmail.com<br>
    <b>ID:</b> Szymon 70406<br>
    <b>Grupa:</b> INLN6 (hybryda)<br>
    <b>Licencjat:</b> Aplikacje mobilne i bazy danych<br>
    <b>Uniwersytet:</b> Uniwersytet WSB Merito Gda≈Ñsk<br>
    <b>GitHub:</b> <a href="https://github.com/wolfgangxxiii/quiz" target="_blank" style="color:#1976d2;">wolfgangxxiii/quiz</a>
  </div>
</div>

  <div id="quiz-main-container" class="quiz-container" style="display:none"></div>
  <div id="flashcard-container" class="flashcard-container" style="display:none"></div>
  <div id="range-container" class="range-container" style="display:none"></div>
<script src="questions_formatted.js"></script>
<script>
  // Skrypt wykrywania urzƒÖdzenia
  (function() {
    // Podstawowe wykrywanie - mo≈ºna je rozbudowaƒá o bardziej zaawansowane metody
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    const isTablet = /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/i.test(navigator.userAgent);

    // Je≈õli nie jest to typowo mobilne urzƒÖdzenie (smartfon) ani tablet, przekieruj na wersjƒô desktopowƒÖ
    // Mo≈ºesz dostosowaƒá tƒô logikƒô, np. je≈õli chcesz, aby tablety te≈º korzysta≈Çy z wersji desktop.
    // Obecnie, je≈õli to NIE jest smartfon LUB NIE jest tablet (co obejmuje PC), to przekieruje.
    // Aby tablety te≈º sz≈Çy na desktop.html, zmie≈Ñ warunek na: if (!isMobile)
    if (!isMobile && !isTablet) { // Prostszy warunek: if (!isMobile) przekieruje r√≥wnie≈º tablety.
      // Sprawd≈∫, czy nie jeste≈õmy ju≈º na desktop.html, aby uniknƒÖƒá pƒôtli przekierowa≈Ñ
      if (window.location.pathname.indexOf('desktop.html') === -1) {
         window.location.href = 'desktop.html';
      }
    }
  })();

  // Reszta Twojego istniejƒÖcego kodu JavaScript dla index.html
  let currentQuestionIndex = 0;
  let score = 0;
  let allowClick = true;
  let questionsArray = [];
  let wrongQuestions = [];
  let rangeMode = false;

  function showMenu() {
    document.getElementById("menu").style.display = "flex";
    document.getElementById("quiz-main-container").style.display = "none";
    document.getElementById("flashcard-container").style.display = "none";
    document.getElementById("range-container").style.display = "none";
    rangeMode = false;
  }

  // ========== TRYB EGZAMIN: 20 losowych pyta≈Ñ ==========

  function startExamMode() {
    questionsArray = getRandomQuestions(questions, 20);
    currentQuestionIndex = 0;
    score = 0;
    allowClick = true;
    wrongQuestions = [];
    rangeMode = false;
    document.getElementById("menu").style.display = "none";
    const quiz = document.getElementById("quiz-main-container");
    quiz.style.display = "flex";
    quiz.innerHTML = `
      <div class="title">Quiz Dyplomowy ‚Äì Tryb egzamin<br><span style="font-size:0.8em;">(20 losowych pyta≈Ñ)</span></div>
      <div class="progress" id="progress"></div>
      <div class="question" id="question"></div>
      <div class="answers" id="answers"></div>
      <button class="next-btn" id="next-button" onclick="nextExamQuestion()">Nastƒôpne pytanie</button>
      <button class="back-btn" onclick="showMenu()">Powr√≥t do menu</button>
    `;
    renderExamQuestion();
  }

  function getRandomQuestions(arr, n) {
    let arrCopy = [...arr];
    let result = [];
    for (let i = 0; i < n && arrCopy.length; i++) {
      let idx = Math.floor(Math.random() * arrCopy.length);
      result.push(arrCopy[idx]);
      arrCopy.splice(idx, 1);
    }
    return result;
  }

  function renderExamQuestion() {
    allowClick = true;
    const questionData = questionsArray[currentQuestionIndex];
    document.getElementById("question").innerText = questionData.question;
    document.getElementById("progress").innerText = `Pytanie ${currentQuestionIndex + 1} z ${questionsArray.length}`;
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = '';

    let allAnswers = [questionData.answer];
    // Poprawka: Upewnij siƒô, ≈ºe questionsArray jest poprawnie filtrowane i nie pr√≥bujemy uzyskaƒá dostƒôpu do questions.answer
    let otherQuestionsIndices = questions.map((_, i) => i).filter(i => questions[i].question !== questionData.question);
    shuffle(otherQuestionsIndices);
    
    for (let i = 0; i < 3 && i < otherQuestionsIndices.length; i++) {
        allAnswers.push(questions[otherQuestionsIndices[i]].answer);
    }
    allAnswers = shuffle(allAnswers);

    allAnswers.forEach((ans, idx) => {
      const btn = document.createElement("button");
      btn.innerText = `${String.fromCharCode(65+idx)}. ${ans}`;
      btn.onclick = () => {
        if (!allowClick) return;
        allowClick = false;
        if (ans === questionData.answer) {
          btn.classList.add("correct");
          score++;
        } else {
          btn.classList.add("wrong");
          wrongQuestions.push(questionData);
          let btns = answersDiv.querySelectorAll("button");
          btns.forEach(b => {
            if (b.innerText.slice(3) === questionData.answer) b.classList.add("correct");
          });
        }
      };
      answersDiv.appendChild(btn);
    });
    document.getElementById("next-button").style.display = "block";
  }

  function nextExamQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questionsArray.length) {
      renderExamQuestion();
    } else {
      showExamResults();
    }
  }

  function showExamResults() {
    const quiz = document.getElementById("quiz-main-container");
    quiz.innerHTML = `
      <div class="title">Quiz Dyplomowy ‚Äì Tryb egzamin</div>
      <div id="results">
        <p>Tw√≥j wynik: ${score} z ${questionsArray.length} (${((score/questionsArray.length)*100).toFixed(1)}%)</p>
        ${wrongQuestions.length > 0 ? `<button class="next-btn" onclick="repeatWrongQuestions()">Powt√≥rz b≈Çƒôdne pytania (${wrongQuestions.length})</button>` : ""}
      </div>
      <button class="restart-btn" onclick="startExamMode()">Powt√≥rz egzamin</button>
      <button class="back-btn" onclick="showMenu()">Powr√≥t do menu</button>
    `;
  }

  function repeatWrongQuestions() {
    if (wrongQuestions.length === 0) return;
    questionsArray = shuffle([...wrongQuestions]);
    wrongQuestions = [];
    currentQuestionIndex = 0;
    score = 0;
    allowClick = true;
    renderExamQuestion();
  }

  // ========== TRYB NAUKI ==========

  function startLearningMode() {
    questionsArray = [...questions];
    currentQuestionIndex = 0;
    document.getElementById("menu").style.display = "none";
    const quiz = document.getElementById("quiz-main-container");
    quiz.style.display = "flex";
    quiz.innerHTML = `
      <div class="title">Quiz Dyplomowy ‚Äì Tryb nauki</div>
      <div class="progress" id="progress"></div>
      <div class="question" id="question"></div>
      <div class="answers" id="answers"></div>
      <button class="next-btn" id="next-button" onclick="nextLearningQuestion()">Nastƒôpne pytanie</button>
      <button class="back-btn" onclick="showMenu()">Powr√≥t do menu</button>
    `;
    renderLearningQuestion();
  }

  function renderLearningQuestion() {
    allowClick = true;
    const questionData = questionsArray[currentQuestionIndex];
    document.getElementById("question").innerText = questionData.question;
    document.getElementById("progress").innerText = `Pytanie ${currentQuestionIndex + 1} z ${questionsArray.length}`;
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = '';

    let allAnswers = [questionData.answer];
    let otherQuestionsIndices = questions.map((_, i) => i).filter(i => questions[i].question !== questionData.question);
    shuffle(otherQuestionsIndices);

    for (let i = 0; i < 3 && i < otherQuestionsIndices.length; i++) {
      allAnswers.push(questions[otherQuestionsIndices[i]].answer);
    }
    allAnswers = shuffle(allAnswers);

    allAnswers.forEach((ans, idx) => {
      const btn = document.createElement("button");
      btn.innerText = `${String.fromCharCode(65+idx)}. ${ans}`;
      btn.onclick = () => {
        if (!allowClick) return;
        allowClick = false;
        if (ans === questionData.answer) {
          btn.classList.add("correct");
        } else {
          btn.classList.add("wrong");
          let btns = answersDiv.querySelectorAll("button");
          btns.forEach(b => {
            if (b.innerText.slice(3) === questionData.answer) b.classList.add("correct");
          });
        }
      };
      answersDiv.appendChild(btn);
    });
    document.getElementById("next-button").style.display = "block";
  }

  function nextLearningQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questionsArray.length) {
      renderLearningQuestion();
    } else {
      showLearningEnd();
    }
  }

  function showLearningEnd() {
    const quiz = document.getElementById("quiz-main-container");
    quiz.innerHTML = `
      <div class="title">Quiz Dyplomowy ‚Äì Tryb nauki</div>
      <div id="results">
        <p>Koniec sesji nauki!</p>
      </div>
      <button class="restart-btn" onclick="startLearningMode()">Powt√≥rz naukƒô</button>
      <button class="back-btn" onclick="showMenu()">Powr√≥t do menu</button>
    `;
  }

  // ========== FISZKI ==========

  function startFlashcardsMode() {
    questionsArray = [...questions];
    currentQuestionIndex = 0;
    document.getElementById("menu").style.display = "none";
    document.getElementById("quiz-main-container").style.display = "none";
    document.getElementById("flashcard-container").style.display = "flex";
    renderFlashcard();
  }

  function renderFlashcard() {
    const cont = document.getElementById("flashcard-container");
    const q = questionsArray[currentQuestionIndex];
    cont.innerHTML = `
      <div class="title">Fiszki ‚Äì powtarzanie pyta≈Ñ</div>
      <div class="progress">${currentQuestionIndex + 1} z ${questionsArray.length}</div>
      <div class="flashcard-question">${q.question}</div>
      <div class="flashcard-answer">${q.answer}</div>
      <div class="flashcard-nav">
        <button onclick="prevFlashcard()" ${currentQuestionIndex===0?'disabled':''}>Poprzednia</button>
        <button onclick="nextFlashcard()" ${currentQuestionIndex===questionsArray.length-1?'disabled':''}>Nastƒôpna</button>
      </div>
      <button class="back-btn" onclick="showMenu()" style="margin-top:1.3em;">Powr√≥t do menu</button>
    `;
  }

  function prevFlashcard() {
    if (currentQuestionIndex > 0) {
      currentQuestionIndex--;
      renderFlashcard();
    }
  }
  function nextFlashcard() {
    if (currentQuestionIndex < questionsArray.length - 1) {
      currentQuestionIndex++;
      renderFlashcard();
    }
  }

  // ========== WYB√ìR ZAKRESU PYTA≈É (quiz) ==========

  function showRangeSelection() {
    document.getElementById("menu").style.display = "none";
    document.getElementById("range-container").style.display = "flex";
    let total = questions.length;
    let html = `<div class="title">Wybierz zakres pyta≈Ñ</div>
      <div class="category-list">
        <label><input type="radio" name="range" value="all" checked> Wszystkie pytania (1-${total})</label>`;
    let rangeStep = 20;
    for (let i = 0; i < total; i += rangeStep) {
      let start = i + 1;
      let end = Math.min(i + rangeStep, total);
      html += `<label><input type="radio" name="range" value="${start}-${end}"> Pytania ${start}-${end}</label>`;
    }
    html += `
      </div>
      <button onclick="startExamWithRange()">Rozpocznij quiz z wybranego zakresu</button>
      <button class="back-btn" onclick="showMenu()">Powr√≥t do menu</button>
    `;
    document.getElementById("range-container").innerHTML = html;
  }

  function startExamWithRange() {
    const radios = document.getElementsByName('range');
    let value = "all";
    for(let r of radios) { if(r.checked) value = r.value; }
    let start=0, end=questions.length;
    if (value !== "all") {
      let [s,e] = value.split('-').map(x=>parseInt(x));
      start = s-1; end = e;
    }
    questionsArray = [...questions.slice(start, end)];
    currentQuestionIndex = 0;
    score = 0;
    allowClick = true;
    wrongQuestions = [];
    rangeMode = true;
    document.getElementById("range-container").style.display = "none";
    const quiz = document.getElementById("quiz-main-container");
    quiz.style.display = "flex";
    quiz.innerHTML = `
      <div class="title">Quiz Dyplomowy ‚Äì Zakres: ${value==="all"?"Wszystkie pytania":value.replace("-","‚Äì")}</div>
      <div class="progress" id="progress"></div>
      <div class="question" id="question"></div>
      <div class="answers" id="answers"></div>
      <button class="next-btn" id="next-button" onclick="nextExamQuestionRange()">Nastƒôpne pytanie</button>
      <button class="back-btn" onclick="showMenu()">Powr√≥t do menu</button>
    `;
    renderExamQuestionRange();
  }

  function renderExamQuestionRange() {
    allowClick = true;
    const questionData = questionsArray[currentQuestionIndex];
    document.getElementById("question").innerText = questionData.question;
    document.getElementById("progress").innerText = `Pytanie ${currentQuestionIndex + 1} z ${questionsArray.length}`;
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = '';

    let allAnswers = [questionData.answer];
    // Poprawka: Upewnij siƒô, ≈ºe questionsArray jest poprawnie filtrowane i nie pr√≥bujemy uzyskaƒá dostƒôpu do questions.answer
    let otherQuestionsIndices = questions.map((_, i) => i).filter(i => questions[i].question !== questionData.question);
    shuffle(otherQuestionsIndices);
    
    for (let i = 0; i < 3 && i < otherQuestionsIndices.length; i++) {
        allAnswers.push(questions[otherQuestionsIndices[i]].answer);
    }
    allAnswers = shuffle(allAnswers);

    allAnswers.forEach((ans, idx) => {
      const btn = document.createElement("button");
      btn.innerText = `${String.fromCharCode(65+idx)}. ${ans}`;
      btn.onclick = () => {
        if (!allowClick) return;
        allowClick = false;
        if (ans === questionData.answer) {
          btn.classList.add("correct");
          score++;
        } else {
          btn.classList.add("wrong");
          wrongQuestions.push(questionData);
          let btns = answersDiv.querySelectorAll("button");
          btns.forEach(b => {
            if (b.innerText.slice(3) === questionData.answer) b.classList.add("correct");
          });
        }
      };
      answersDiv.appendChild(btn);
    });
    document.getElementById("next-button").style.display = "block";
  }

  function nextExamQuestionRange() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questionsArray.length) {
      renderExamQuestionRange();
    } else {
      showExamResultsRange();
    }
  }

  function showExamResultsRange() {
    const quiz = document.getElementById("quiz-main-container");
    quiz.innerHTML = `
      <div class="title">Quiz Dyplomowy ‚Äì Quiz z zakresu</div>
      <div id="results">
        <p>Tw√≥j wynik: ${score} z ${questionsArray.length} (${((score/questionsArray.length)*100).toFixed(1)}%)</p>
        ${wrongQuestions.length > 0 ? `<button class="next-btn" onclick="repeatWrongQuestionsRange()">Powt√≥rz b≈Çƒôdne pytania (${wrongQuestions.length})</button>` : ""}
      </div>
      <button class="restart-btn" onclick="showRangeSelection()">Wybierz inny zakres</button>
      <button class="back-btn" onclick="showMenu()">Powr√≥t do menu</button>
    `;
  }

  function repeatWrongQuestionsRange() {
    if (wrongQuestions.length === 0) return;
    questionsArray = shuffle([...wrongQuestions]);
    wrongQuestions = [];
    currentQuestionIndex = 0;
    score = 0;
    allowClick = true;
    renderExamQuestionRange();
  }

  // ========== WYB√ìR ZAKRESU PYTA≈É (FISZKI) ==========

  function showRangeSelectionFlashcards() {
    document.getElementById("menu").style.display = "none";
    document.getElementById("range-container").style.display = "flex";
    let total = questions.length;
    let html = `<div class="title">Wybierz zakres pyta≈Ñ (fiszki)</div>
      <div class="category-list">
        <label><input type="radio" name="range" value="all" checked> Wszystkie pytania (1-${total})</label>`;
    let rangeStep = 20;
    for (let i = 0; i < total; i += rangeStep) {
      let start = i + 1;
      let end = Math.min(i + rangeStep, total);
      html += `<label><input type="radio" name="range" value="${start}-${end}"> Pytania ${start}-${end}</label>`;
    }
    html += `
      </div>
      <button onclick="startFlashcardsWithRange()">Rozpocznij fiszki z wybranego zakresu</button>
      <button class="back-btn" onclick="showMenu()">Powr√≥t do menu</button>
    `;
    document.getElementById("range-container").innerHTML = html;
  }

  function startFlashcardsWithRange() {
    const radios = document.getElementsByName('range');
    let value = "all";
    for(let r of radios) { if(r.checked) value = r.value; }
    let start=0, end=questions.length;
    if (value !== "all") {
      let [s,e] = value.split('-').map(x=>parseInt(x));
      start = s-1; end = e;
    }
    questionsArray = [...questions.slice(start, end)];
    currentQuestionIndex = 0;
    document.getElementById("range-container").style.display = "none";
    document.getElementById("quiz-main-container").style.display = "none";
    document.getElementById("flashcard-container").style.display = "flex";
    renderFlashcard();
  }

  // ========== POMOCNICZE ==========

  function shuffle(array) {
    let currentIndex = array.length, randomIndex;
    while (currentIndex !== 0) {
      randomIndex = Math.floor(Math.random() * currentIndex);
      currentIndex--;
      [array[currentIndex], array[randomIndex]] = [
        array[randomIndex], array[currentIndex]];
    }
    return array;
  }

  // ========== START ==========
  // Upewnij siƒô, ≈ºe menu jest pokazywane po za≈Çadowaniu, je≈õli nie nastƒÖpi≈Ço przekierowanie
  if (document.getElementById("menu").style.display !== "none" && 
      document.getElementById("quiz-main-container").style.display === "none" &&
      document.getElementById("flashcard-container").style.display === "none" &&
      document.getElementById("range-container").style.display === "none") {
    showMenu();
  }

</script>
</body>
</html>
